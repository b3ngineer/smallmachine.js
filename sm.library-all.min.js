var smallmachine=function(d){function c(a,b){for(var g=0;g<b.dependencies.length;g++){for(var d=!1,c=0;c<a.length;c++)if(b.dependencies[g]==a[c].namespace){d=!0;break}if(!d)return b.dependencies[g]}return null}function k(a,g){this._term=a;this._rules=g._rules;return this}function h(){return this}function f(){return this}function m(a){this.namespace=a;this._inferencer=new b;this._activators=[];this.Term=function(a){this._id=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var g=
16*Math.random()|0;return("x"==a?g:g&3|8).toString(16)})}();"undefined"!==typeof a._value&&"undefined"!==typeof a._type?(this._value=a._value,this._type=a._type):(this._value=a,this._type=null);return this};return this}function b(){this._term={_value:null};this._rules=[];return this}function a(a,g,b){a=this[a];var c=this[g],e=this[b];c._type===d.CONCEPT?d.error(Error("Cannot define a relationship with a concept type: "+c._value)):null===c._type&&(c._type=d.RELATIONSHIP);e._type===d.RELATIONSHIP?d.error(Error("Cannot create a relationship with a relationship type: "+
e._value)):null===e._type&&(e._type=d.CONCEPT);a._type===d.RELATIONSHIP?d.error(Error("Cannot create a relationship from a relationship type: "+a._value)):null===a._type&&(a._type=d.CONCEPT);"undefined"===typeof a[g]&&(a[g]=new a.constructor(c));"undefined"===typeof a[g][b]&&(a[g][b]=e);"undefined"===typeof a[b]&&(a[b]=e);e.relate(a[g]);for(var l in e)e.hasOwnProperty(l)&&"function"===typeof e[l].relate&&("undefined"===typeof a[g][l]&&(a[g][l]=e[l]),"undefined"===typeof a[l]&&(a[l]=e[l]),e[l].relate(a[g]))}
function g(a,g){var b=this[a],e=this[g];e._type===d.RELATIONSHIP?d.error(Error("Cannot apply isA to a relationship type: "+e._value)):null===e._type&&(e._type=d.CONCEPT);b._type===d.RELATIONSHIP?d.error(Error("Cannot apply isA to a relationship type: "+b._value)):null===b._type&&(b._type=d.CONCEPT);"undefined"===typeof e[a]&&(e[a]=b)}function e(a,g){var b=this[a],e=this[g];e._type===d.RELATIONSHIP?d.error(Error("Cannot apply hasRange to a relationship type: "+e._value)):null===e._type&&(e._type=d.CONCEPT);
b._type===d.CONCEPT?d.error(Error("Cannot assign hasRange from a concept type: "+b._value)):null===b._type&&(b._type=d.RELATIONSHIP);"undefined"===typeof b[g]&&(b[g]=e);e.relate(b);for(var c in e)if(e.hasOwnProperty(c)&&"function"===typeof e[c].relate){var l=e[c]._value||null;null!==l&&("undefined"===typeof b[l]&&(b[l]=e[c]),e[c].relate(b))}}function l(a,b){var g=this[a],e=this[b];e._type===d.RELATIONSIP?d.error(Error("Cannot apply hasRange to a relationship type: "+e._value)):null===e._type&&(e._type=
d.CONCEPT);g._type===d.CONCEPT?d.error(Error("Cannot assign hasRange from a concept type: "+g._value)):null===g._type&&(g._type=d.RELATIONSHIP);"undefined"===typeof e[a]&&(e[a]=g)}"function"!==typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"===typeof"test".__proto__?function(a){return a.__proto__}:function(a){return a.constructor.prototype});d=function(a,g){"undefined"===typeof a&&d.error(Error("Missing required parameter for smallmachine constructor: one or more instances of type 'Ontology'"));
for(var b=[].concat(a),e="",l=0;l<b.length;l++)"undefined"===typeof b[l].namespace?"undefined"!==typeof d.ontology[b[l]]&&(e=e+b[l]+",",b[l]=d.ontology[b[l]]):e=e+b[l].namespace+",";e=new m(e.substring(0,e.length-1));for(l=0;l<b.length;l++){for(var f in b[l])b[l].hasOwnProperty(f)&&"undefined"!==typeof b[l][f]._name&&"Proxy"==b[l][f]._name&&e.addTerm(b[l][f]._term._value);for(var h=0;h<b[l]._inferencer._rules.length;h++)e._inferencer._rules.push(b[l]._inferencer._rules[h]);for(h=0;h<b[l]._activators.length;h++){var k=
c(b,b[l]._activators[h]);null!==k&&d.error(Error("Cannot wire-in ontology with missing activator dependency on '"+k+"'"));e.registerActivator(b[l]._activators[h]);e._activators.sort(function(a,b){if(a.namespace==b.namespace)return 0;for(var g=0;g<a.dependencies.length;g++)if(b.namespace==a.dependencies[g])return 1;for(g=0;g<b.dependencies.length;g++)if(a.namespace==b.dependencies[g])return-1;return 0})}}return e.getModel(g)};d.alsoBehavesLike=function(a,b){("undefined"===typeof a||"undefined"===typeof b)&&
d.error(Error("Cannot mixin with an undefined object"));for(var g in b)if(b.hasOwnProperty(g)&&!(0==g.indexOf("_")||"initializer"===g))if("undefined"!==typeof a[g]){if("undefined"!==typeof b[g].prototype){if("undefined"!==typeof b[g].prototype.initializer&&!0==b[g].prototype.initializer)continue;var e="undefined"!==typeof b[g].prototype.virtual?b[g].prototype.virtual:!1}var c="undefined"!==typeof a[g].prototype?a[g].prototype.virtual:!1;if(!c||!e)c&&(a[g]=b[g])}else a[g]=b[g];"undefined"!==typeof b.prototype&&
("undefined"===typeof a.prototype&&(a.prototype={}),d.alsoBehavesLike(a.prototype,b.prototype))};d.error=function(a,b){if("undefined"!==typeof b&&"function"===typeof b.handleError)b.handleError(a);else if("function"===typeof d.handleError)d.handleError(a);else throw a;};var s=function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)};d.getGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s)};d.CONCEPT="concept";d.RELATIONSHIP="relationship";k.prototype._name=
"Proxy";h.prototype.relate=function(a){"undefined"===typeof this._relatesTo&&(this._relatesTo=[]);for(var b=!1,g=0;g<this._relatesTo.length;g++)if(this._relatesTo[g]._id==a._id){b=!0;break}b||this._relatesTo.push(a)};f.prototype._name="Behavior";d.Behavior=f;m.prototype._name="Ontology";m.prototype.addTerm=function(a){if("undefined"!==typeof this[a])return this;var b=this.Term;b.prototype.relate=h.prototype.relate;b=new b(a);this[a]=new k(b,this._inferencer);return this};m.prototype.registerActivator=
function(a,b){"undefined"===typeof b&&(b=[]);null===d.typeMask(a,{fn:"function",namespace:!0,dependencies:!0})?this._activators.push(a):this._activators.push({fn:a,namespace:this.namespace,dependencies:b})};m.prototype.getModel=function(a){var b=new function(){return this},g=[];if("undefined"!==typeof a){g=g.concat(a);for(a=0;a<g.length;a++)if("undefined"===typeof g[a]&&d.error("One or more [behaviors] arguments were supplied to the smallmachine constructor that are 'undefined'; error creating object model"),
"undefined"!==typeof g[a].prototype&&!0===g[a].prototype.initializer)g[a](b)}for(var e in this)if(this.hasOwnProperty(e)&&!("undefined"===typeof this[e]||"undefined"===this[e]._term)&&0!==e.indexOf("_"))if("undefined"!==typeof this[e]._term){b[e]=this[e]._term;for(a=0;a<g.length;a++)d.alsoBehavesLike(Object.getPrototypeOf(b[e]),g[a].prototype)}else b[e]=this[e];this._inferencer._rules.sort(function(a,b){return a._priority-b._priority});for(a=0;a<this._inferencer._rules.length;a++)g=this._inferencer._rules[a],
g._fn.apply(b,g._args);for(a=0;a<this._activators.length;a++)this._activators[a].fn(b);return b};d.Ontology=m;var n=function(a,b,g){this._fn=b;this._args=g;this._priority=a;return this};b.prototype.isA=function(a){this._rules.push(new n(1,g,[this._term._value,a._term._value]));return this};b.prototype.relatesTo=function(b,g){this._rules.push(new n(10,a,[this._term._value,b._term._value,g._term._value]));return this};b.prototype.hasDomain=function(a){this._rules.push(new n(3,l,[this._term._value,a._term._value]));
return this};b.prototype.hasRange=function(a){this._rules.push(new n(2,e,[this._term._value,a._term._value]));return this};d.alsoBehavesLike(k,b);d.typeMask=function(a,b){var g=[],e;for(e in b)b.hasOwnProperty(e)&&("undefined"===typeof a||"undefined"===typeof a[e]?g.push(e):"undefined"!==typeof a[e]&&typeof a[e]!==b[e]&&!0!==b[e]&&g.push(e));return 0===g.length?null:g};return d}(smallmachine||{});(function(d){function c(){return this}function k(){return this}function h(a){this._channel=a;return this}function f(a,b,e){"undefined"===typeof b&&d.error(Error("Parameter 'key' is required when instantiating the sm.NamedValue type"));this.namespace=a;this.key=b;this.value=e;return this}function m(){this._collection={};return this}var b=new d.Ontology("sm.properties");b.addTerm("property");b.addTerm("type");b.addTerm("ontology");b.addTerm("behavior");b.addTerm("hasMemberType");b.addTerm("hasMember");
b.addTerm("Ontology");b.addTerm("Behavior");b.addTerm("Constructor");b.addTerm("Null");b.ontology.isA(b.property);b.behavior.isA(b.property);b.Ontology.isA(b.type);b.Behavior.isA(b.type);b.Constructor.isA(b.type);b.Null.isA(b.type);b.ontology.relatesTo(b.hasMemberType,b.Ontology);b.behavior.relatesTo(b.hasMemberType,b.Behavior);b.ontology.relatesTo(b.hasMember,b.Null);b.behavior.relatesTo(b.hasMember,b.Null);c.prototype.extendedBy=function(a,b){var e=this.hasMemberType;"undefined"===typeof b&&("undefined"===
e?b=a._name:"undefined"!==typeof a.prototype&&(b=a.prototype._name));if("undefined"!==typeof b&&"function"===typeof a)"undefined"!==typeof this[b]?d.alsoBehavesLike(this[b],a):this[b]=a,"undefined"===typeof this[b]._name&&(this[b]._name=b);else{var c=b||a.namespace||a._name;"undefined"===typeof c&&d.error(Error("Cannot call extendedBy on the core ontology with an object that is missing the 'namepsace' and '_name' properties without specifying a 'typeName'"));if("undefined"!==typeof this[c])d.alsoBehavesLike(this[c],
a);else{var h=d[this._value][e._value];"undefined"===typeof h&&d.error(Error("The specified type does not exist in the core object model: "+e._value));var e=a._name||a.constructor.name,f=!1,k;for(k in h)if(h.hasOwnProperty(k)&&0!==k.indexOf("_")&&k===e){this.hasMember[c]=a;this[c]=a;f=!0;break}f||d.error(Error("Did not find an allowed model type for: "+e))}}};k.prototype._name="Null";d.alsoBehavesLike(d,b.getModel(c));d.ontology.extendedBy(new k);d.behavior.extendedBy(new k);h.prototype._name="AsyncResult";
h.prototype.publish=function(a,b){this._channel.publish(a,b);return this};d.type.extendedBy(h);f.prototype.adapt=function(a,b){this.namespace=a;if("undefined"!==typeof b)for(var e=[].concat(b),c=0;c<e.length;c++)d.alsoBehavesLike(this,e[c]);return this};f.prototype._name="NamedValue";d.type.extendedBy(f);m.prototype._name="NamedValueCollection";m.prototype.exists=function(a,b){var e=a;null===d.typeMask(a,{namespace:!0,key:!0})&&(e=a.namespace,b=a.key);return"undefined"!==typeof this._collection[e]&&
"undefined"!==typeof this._collection[e][b]};m.prototype.add=function(a,b,e){var c=a.namespace||a,h=a.key||b;"undefined"!==typeof this._collection[c]&&"undefined"!==this._collection[c][h]&&d.error(Error("Cannot add a new entry to the collection (already exists): ["+c+"]"+h));this.modify(a,b,e);return this};m.prototype.modify=function(a,b,e){var c=a.namespace||a;b=a.key||b;a=a.value||e;"undefined"===typeof b&&d.error(Error("Must supply a valid key"));"undefined"===typeof a&&d.error(Error("Must supply a valid value"));
"undefined"===typeof this._collection[c]&&(this._collection[c]={});this._collection[c][b]=a;return this};m.prototype.remove=function(a,b){if(!("undefined"===typeof this._collection[a]||"undefined"===typeof this._collection[a][b]))return delete this._collection[a][b],this};m.prototype.getValue=function(a,b){var e=a.namespace||a,c=a.key||b;if(!("undefined"===typeof this._collection[e]||"undefined"===this._collection[e][c]))return e=this._collection[e][c],"undefined"!==typeof e&&("function"===typeof a.setValue?
a.setValue(e):"undefined"!==typeof a.value&&(a.value=e)),e};d.type.extendedBy(m)})(smallmachine);(function(d){var c=new d.Ontology("sm.channels");c.addTerm("thing");c.addTerm("user");c.addTerm("system");c.addTerm("action");c.addTerm("click");c.addTerm("doubleClick");c.addTerm("keyPress");c.addTerm("task");c.addTerm("initialize");c.addTerm("insert");c.addTerm("remove");c.addTerm("get");c.addTerm("set");c.addTerm("messenger");c.addTerm("success");c.addTerm("error");c.addTerm("performs");c.addTerm("reactsTo");c.user.isA(c.thing);c.user.relatesTo(c.performs,c.action);c.system.isA(c.thing);c.system.relatesTo(c.performs,
c.task);c.action.isA(c.thing);c.task.isA(c.thing);c.messenger.isA(c.thing);c.click.isA(c.action);c.doubleClick.isA(c.action);c.keyPress.isA(c.action);c.get.isA(c.task);c.set.isA(c.task);c.success.isA(c.messenger);c.error.isA(c.messenger);c.initialize.isA(c.task);c.insert.isA(c.task);c.remove.isA(c.task);c.performs.hasRange(c.action).hasRange(c.task);c.reactsTo.hasRange(c.action).hasDomain(c.system);c.registerActivator(function(c){function f(a,b){if("undefined"!==typeof jQuery)try{jQuery.ajax({dataType:"json",
url:a,type:"GET",success:function(l,f,k){c.messenger.success.publish(f);b.publish(new d.type.NamedValue("sm.channels",a,l))},error:function(a,b,e){d.error(Error(e))}})}catch(l){d.error(Error(l))}else{var f=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");f.onprogress=function(){};f.onerror={};f.onreadystatechange=function(){4>f.readyState||(200==f.status?(c.messenger.success.publish(f.statusText),b.publish(new d.type.NamedValue("sm.channels",a,JSON.parse(f.responseText)))):
d.error(Error(f.statusText)))};f.open("GET",a,!0);f.setRequestHeader("X-Requested-With","XMLHttpRequest");f.setRequestHeader("Content-type","application/json");f.send(null)}return b}var k={update:function(a){return"undefined"!==typeof a.key&&"undefined"!==typeof a.namespace?function(a){c.memory.modify(a)}:!1}};d.alsoBehavesLike(c,{memory:new d.type.NamedValueCollection});c.set.subscribe({update:function(a){return k}});var b={update:function(a){return"undefined"!==typeof a.key&&"undefined"!==typeof a.namespace?
function(a){c.memory.getValue(a)}:!1}};c.get.subscribe({update:function(a){return b}});"function"===typeof c.initialize.addHelper&&c.initialize.addHelper("json",f);"function"===typeof c.set.addHelper&&c.set.addHelper("config",function(a){return new d.type.NamedValue("sm.channels","config",a)});if("function"===typeof c.get.addHelper){c.get.addHelper("json",f);var a=function(){this.namespace="sm.channels";this.key="config";return this};a.prototype._name="Config";a.prototype.setValue=function(a){d.alsoBehavesLike(this,
a)};d.type.extendedBy(a);c.get.addHelper("config",function(a){return a})}});try{d.ontology.extendedBy(c)}catch(k){d.error(Error("Could not extend the smallmachine.ontology property with the 'sm.channels' ontology: "+k.message+"\n"+k.stack))}})(smallmachine);(function(d){function c(c,d){this._value=c;this._type=d;return this}c.prototype._name="Channel";c.prototype.forward=function(c,d){null!=this._value&&(d[this._value]=!0);for(var f in this)if(this.hasOwnProperty(f)&&!("function"===typeof this[f]||0===f.indexOf("_"))&&!0!==d[f]&&"function"===typeof this[f].publish)d[f]=!0,this[f].publish(c,d);if("undefined"!==typeof this._relatesTo)for(f=0;f<this._relatesTo.length;f++)"undefined"!==typeof this._relatesTo[f]._subscribers&&this.notify(c,this._relatesTo[f]._subscribers)};
c.prototype.unsubscribe=function(c){"undefined"!==typeof this._subscribers&&delete this._subscribers[c]};c.prototype.subscribe=function(c){"undefined"===typeof this._subscribers&&(this._subscribers={});var h=d.getGuid();"function"===typeof c?this._subscribers[h]={update:c,lifetime:1}:("undefined"===typeof c.lifecycle&&(c.lifetime=1),this._subscribers[h]=c);return h};c.prototype.notify=function(c,h){var f=!1,m={},b=0,a=[],g;for(g in h){var e=h[g].update(c);"undefined"!==typeof h[g]&&(0>=h[g].lifetime&&
this.unsubscribe(g),!0===e?f=!0:"function"===typeof e?(a.push(e),f=!0):e&&"function"===typeof e.update&&(m[d.getGuid()]=e,b++))}if(f){g=!1;for(e=0;e<a.length;e++)!1===!a[e](c)&&(g=!0);!1===g&&(f=!1)}!1==f&&0<b&&this.notify(c,m)};c.prototype.publish=function(c,h){h=h||{};if("function"===typeof c&&(c=c(new d.type.AsyncResult(this)),"undefined"!==typeof c&&"undefined"!==typeof c._channel&&"function"===typeof c.publish))return this;if("undefined"===typeof this._subscribers)return this.forward(c,h),this;
this.notify(c,this._subscribers);this.forward(c,h);return this};c.prototype.addHelper=function(d,h){var f=c.prototype.publish,m=this;this[d]=function(){for(var b=[],a=0;a<arguments.length;a++)b.push(arguments[a]);return f.apply(m,[function(a){b.push(a);return h.apply(m,b)}])};return this};d.behavior.extendedBy(c)})(smallmachine);(function(d,c){function k(d){"undefined"!==typeof c.fn&&c.extend({sm:d});return this}k.prototype._name="Extension";k.prototype.initializer=!0;d.behavior.extendedBy(k)})(smallmachine,jQuery||{});(function(d){function c(b,a,c,e){this.id=b.id||d.getGuid();this.width=parseFloat(b.width)||50;this.height=parseFloat(b.height)||50;this.y=parseFloat(b.y);this.x=parseFloat(b.x);this.edges=b.edges||[];this.label=b.label||this.id;this.paper=a;this.shapeAttr=c;this.shapeLabelAttr=e;this.data={};return this}function k(b,a,c,e,d,f){this.id1=b.id;this.id2=a.id;this.r1=b.width/2;this.r2=a.width/2;this.x1=parseFloat(b.x);this.y1=parseFloat(b.y);this.x2=parseFloat(a.x);this.y2=parseFloat(a.y);this.label=b.edges[c].label||
"";this.paper=e;this.lineAttr=d;this.edgeLabelAttr=f;this.data={};return this}function h(b){this._model=b;this.handleError=function(a){b.messenger.error.publish(a)};return this}var f=new d.Ontology("sm.nodes");f.addTerm("task");f.addTerm("insert");f.addTerm("connect");f.addTerm("set");f.addTerm("get");f.addTerm("paint");f.addTerm("paintNodes");f.paint.isA(f.task);f.insert.isA(f.task);f.connect.isA(f.task);f.set.isA(f.task);f.get.isA(f.task);f.paintNodes.isA(f.paint);c.prototype.update=function(b){b=
this.paper.circle(this.x,this.y,this.width/2,this.height/2);b.id=this.id;"function"===typeof this.shapeAttr?this.shapeAttr(b,this):b.attr(this.shapeAttr);b=this.paper.text(this.x,this.y,this.label);"function"===typeof this.shapeLabelAttr?this.shapeLabelAttr(b,this):b.attr(this.shapeLabelAttr);return!0};k.prototype.update=function(b){var a=Math.sqrt(Math.pow(this.x2-this.x1,2)+Math.pow(this.y2-this.y1,2));b=this.r1/a;a=(a-this.r2)/a;b=this.paper.path(["M",b*this.x2+(1-b)*this.x1,b*this.y2+(1-b)*this.y1,
"L",a*this.x2+(1-a)*this.x1,a*this.y2+(1-a)*this.y1]);"function"===typeof this.lineAttr?this.lineAttr(b,this):b.attr(this.lineAttr);b=this.paper.text((this.x1+this.x2)/2,(this.y1+this.y2)/2,this.label);"function"===typeof this.edgeLabelAttr?this.edgeLabelAttr(b,this):b.attr(this.edgeLabelAttr);a=180*Math.atan2(this.y2-this.y1,this.x2-this.x1)/Math.PI;90<a?b.transform("t-6,-6r"+(a+180)):b.transform("t6,-6r"+a);return!0};h.prototype.update=function(b){var a=new d.type.Config;this._model.system.get.config(a);
b=b.value;if("undefined"===typeof b)return!1;null!==d.typeMask(b,{length:!0,sort:"function"})&&d.error(Error("Cannot determine the JSON type; expecting an array (or comparable object) of node objects but received "+b),this);var g=new d.type.NamedValue("sm.raphaeljs","paper",null);this._model.get.publish(g);g.value.clear();for(var e=0;e<b.length;e++){for(var l=new c(b[e],g.value,a.shapeAttr||{},a.shapeLabelAttr||{}),f=0;f<l.edges.length;f++){var h;a:{for(h=0;h<b.length;h++)if(b[h].id===l.edges[f].id){h=
b[h];break a}h=null}null!==h&&("undefined"!=typeof h.x&&"undefined"!==typeof h.y)&&(h=new k(l,h,f,g.value,a.lineAttr||{},a.edgeLabelAttr||{}),this._model.connect.publish(h))}this._model.insert.publish(l)}};f.registerActivator(function(b){var a=new h(b);b.paintNodes.subscribe(function(b){return a});b.connect.subscribe(function(a){return a});b.insert.subscribe(function(a){return a})},["sm.channels","sm.raphaeljs"]);try{d.ontology.extendedBy(f)}catch(m){d.error(Error("Could not extend the smallmachine.ontology property with the 'sm.nodes' ontology: "+
m.message+"\n"+m.stack))}})(smallmachine);(function(d,c,k){c=new d.Ontology("sm.flowchart");c.addTerm("paint");c.addTerm("get");var h=function(a,b,c,d){"undefined"===typeof a?(this.y=50,this.previousSector={y:0,height:0}):(this.previousSector=a,this.y=this.previousSector.y+this.previousSector.height+80);this.height=0;this.x=0.5*b;this.width=0;this.layoutWidth=b;this.lastNodeGroup=null;this.nodeGroups=0;this.nodes=[];return this};h.prototype.add=function(a,b){var c=parseFloat(a.width);null===this.lastNodeGroup?this.lastNodeGroup=b:this.lastNodeGroup!=
b&&(this.nodeGroups++,this.lastNodeGroup=b);this.width=this.width+40+c;var d=parseFloat(a.height);this.height=this.height<d?d:this.height;this.x=this.x-20-0.5*c;for(d=c=0;d<a.edges.length;d++)a.edges[d].label.length>c&&(c=a.edges[d].label.length);6<c&&(c=this.height+10*(c-6),c>this.height&&(this.height=c));this.nodes.push({node:a,nodeGroup:b})};h.prototype.finalize=function(a){if("undefined"===typeof a||0>a)a=0;a*=0.5;for(var b=null,c=0,d=0;d<this.nodes.length;d++)null===b?b=this.nodes[d].nodeGroup:
this.nodes[d].nodeGroup!=b&&(c++,b=this.nodes[d].nodeGroup),this.nodes[d].node.x=this.x+(40*d+40*c)+this.nodes[d].node.width*d+a,this.nodes[d].node.y=this.y};var f=function(a){this.paper=a;this.width=parseFloat(a.width);this.height=parseFloat(a.height);this.finalWidth=this.width;this.finalHeight=this.height;this.sectors=[];return this};f.prototype.addToSector=function(a,b,c){var d=this.sectors[b];"undefined"===typeof d&&(d=new h(this.sectors[b-1],this.width,this.height,c),this.sectors[b]=d);d.add(a,
c)};f.prototype.finalize=function(){for(var a=0;a<this.sectors.length;a++)this.sectors[a].width+=40*this.sectors[a].nodeGroups,this.sectors[a].width>this.finalWidth&&(this.finalWidth=this.sectors[a].width);for(a=0;a<this.sectors.length;a++)this.sectors[a].finalize(this.finalWidth-this.width)};var m=function(a,b,c,d,f,h){d.addToSector(a,f++,h);for(h=0;h<a.edges.length;h++)m(b[c[a.edges[h].id]],b,c,d,f,a.id)};c.registerActivator(function(a){a.paint.subscribe(function(b){if(null===d.typeMask(b.value,
{length:!0,sort:"function"}))return function(c){c=b.value;var h=new d.type.NamedValue("sm.flowchart","root",null);a.get.publish(h);var k=new d.type.NamedValue("sm.raphaeljs","paper",null);a.get.publish(k);for(var n=new f(k.value),h=h.value,p={},q=c[0],r=0;r<c.length;r++)p[c[r].id]=r,c[r].id===h&&(q=c[r]);m(q,c,p,n,0,q.id);n.finalize();k.value.setSize(1.05*n.finalWidth,1.05*n.finalHeight);return!1}})},["sm.channels","sm.nodes","sm.raphaeljs"]);try{d.ontology.extendedBy(c)}catch(b){d.error(Error("Could not extend the smallmachine.ontology property with the 'sm.nodes' ontology: "+
b.message+"\n"+b.stack))}})(smallmachine,jQuery,Raphael);(function(d,c){var k=new d.Ontology("sm.raphaeljs");k.addTerm("set");k.registerActivator(function(f){var h=/^(\d+)%?$/,b=function(a,b,e,f){f=document.getElementById(a+"");if("undefined"===typeof f||!f)throw Error("The specified element ID could not be found: "+a);var k=window,n=document,p=n.documentElement,q=n.getElementsByTagName("body")[0],n=k.innerWidth||p.clientWidth||q.clientWidth,k=k.innerHeight||p.clientHeight||q.clientHeight,p=b;null===b&&(p=f.offsetWidth||n);q=h.exec(p+"");if(!q)throw Error("The specified value for width is invalid (number, percentage or null allowed): "+
b);"function"===typeof p.indexOf&&0<p.indexOf("%")&&(p=100*(f.offsetWidth||n)/parseFloat(q[0]));b=e;null==e&&(b=f.offsetHeight||k);n=h.exec(b+"");if(!n)throw Error("The specified value for height is invalid (number, percentage or null allowed): "+e);"function"===typeof b.indexOf&&0<b.indexOf("%")&&(b=(f.offsetHeight||k)*parseFloat(n[0])/100);a=c(a,p,b);return new d.type.NamedValue("sm.raphaeljs","paper",a)};"function"===typeof f.set.addHelper&&f.set.addHelper("svg",b)},["sm.channels"]);try{d.ontology.extendedBy(k)}catch(h){throw Error("Could not extend the smallmachine.ontology property with the 'sm.raphaeljs' ontology: "+
h.message+"\n"+h.stack);}})(smallmachine,Raphael);(function(d,c){var k=new d.Ontology("sm.sammyjs");k.addTerm("initialize");var h=function(b,a,c){this._id=b;this._callback=a;this._runArg=c||"#/";return this};h.prototype._name="Sammy";d.type.extendedBy(h);var f={update:function(b){return null===d.typeMask(b,{_id:!0,_callback:!0,_runArg:!0})?function(a){c("#"+a._id,a._callback).run(a._runArg)}:!1}};k.registerActivator(function(b){b.initialize.subscribe({update:function(a){return f}})},["sm.channels"]);try{d.ontology.extendedBy(k)}catch(m){throw Error("Could not extend the smallmachine.ontology property with the 'sm.sammyjs' ontology: "+
m.message+"\n"+m.stack);}})(smallmachine,Sammy);
